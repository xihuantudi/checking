!function(i){i.fn.flyIn=function(t,o){var n=i(this).css("top");i(this).css({top:-i(this).height()-10+"px",display:"block"}).animate({top:n},t,o)},i.fn.flyOut=function(t,o){i(this).animate({top:-i(this).height()-10},t,function(){i(this).hide();try{o()}catch(t){}})},i.fn.zoomIn=function(t,o){var n=i(this).css("top"),e=i(this).css("left"),a=i(this).width(),s=i(this).height();i(this).css({top:parseInt(n)+s/2+"px",left:parseInt(e)+a/2+"px",display:"block",width:0,height:0}).animate({top:n,left:e,width:a,height:s},t,o)},i.fn.zoomOut=function(t,o){var n=i(this).css("top"),e=i(this).css("left"),a=i(this).width(),s=i(this).height();i(this).animate({top:parseInt(n)+s/2,left:parseInt(e)+a/2,width:0,height:0},t,function(){i(this).hide();try{o()}catch(t){}})},i.fn.draggable=function(t){var o={handler:null};t=i.extend(o,t);var n=this;i(t.handler).mousedown(function(t){var o=t.pageX-i(n).position().left,e=t.pageY-i(n).position().top;i(document).mousemove(function(t){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),i(n).css({top:t.pageY-e+"px",left:t.pageX-o+"px"})})}).mouseup(function(){i(document).unbind("mousemove")})}}(jQuery),window.JDialog={getDocWidth:function(){return Math.max(document.documentElement.clientWidth,document.body.clientWidth,$(document).width())},getDocHeight:function(){return Math.max(document.documentElement.clientHeight,document.body.clientHeight,$(document).height())+document.documentElement.scrollTop},getWindowHeight:function(){return $(window).height()},getWindowWidth:function(){return $(window).width()},transitionTime:300},JDialog.lock={lockBak:null,options:null,create:function(){if(null==this.lockBak){var i=document.createElement("DIV");i.id="lock_panel",this.lockBak=i,document.body.appendChild(i)}},setSize:function(){null!=this.lockBak&&$(this.lockBak).css({opacity:this.options.opacity,width:JDialog.getDocWidth(),height:JDialog.getDocHeight()})},show:function(){null!=this.lockBak&&$(this.lockBak).fadeIn(JDialog.transitionTime)},hide:function(){null!=this.lockBak&&$(this.lockBak).fadeOut(JDialog.transitionTime)},remove:function(){null!=this.lockBak&&($(this.lockBak).remove(),this.lockBak=null)},work:function(i){this.options=$.extend({opacity:.5,timer:0},i),this.create(),this.setSize(),this.show();var t=this;$(window).bind("resize",function(){t.setSize()}),this.options.timer>0&&setTimeout(function(){JDialog.lock.fadeOut(JDialog.transitionTime)},this.options.timer)}},JDialog.tip={tipBak:null,options:null,handler:null,create:function(){null!=this.tipBak&&this.remove();var i=$('<div class="jtip_box"></div>'),t=$('<div class="jtip_left_icon" id="jdialog_tip_icon"><!--提示图标--></div>'),o=$('<div class="jtip_content" id="jdialog_tip_content"></div>'),n=$('<div class="jtip_right" id="jtip_right"><!--右边圆角--></div>');i.append(t),i.append(o),i.append(n),$("body").append(i),this.tipBak=i},setContent:function(){null!=this.tipBak&&$("#jdialog_tip_content").html(this.options.content)},center:function(){if(null!=this.tipBak){var i=window.document.body.scrollTop||window.document.documentElement.scrollTop,t=0;if(this.options.width)t=this.options.width;else{var o=$("#jdialog_tip_icon").width()+$("#jtip_loading").width()+21+$("#jtip_right").width();t=o+$("#jdialog_tip_content").width()}var n=(JDialog.getWindowHeight()-$(this.tipBak).height())/2+i;void 0!=this.options.top&&(n=this.options.top+i),$(this.tipBak).css({width:t+"px",top:n+"px",left:(JDialog.getWindowWidth()-t)/2+"px"})}},show:function(){if(null!=this.tipBak){switch(this.options.type){case"warn":$("#jdialog_tip_icon").addClass("jtip_warn");break;case"ok":$("#jdialog_tip_icon").addClass("jtip_ok");break;case"error":$("#jdialog_tip_icon").addClass("jtip_error");break;case"loading":var i=$('<div id="jtip_loading" class="jtip_load_img"><em id="jtip_loading_icon"></em></div>'),t=$("#jdialog_tip_icon");t.addClass("jtip_loading"),i.insertAfter(t);break;default:$("#jdialog_tip_icon").addClass("jtip_warn")}$(this.tipBak).fadeIn()}},remove:function(){if(null!=this.tipBak){try{clearTimeout(this.handler)}catch(i){}this.tipBak.remove(),this.tipBak=null}if(this.options.lock)try{JDialog.lock.hide()}catch(i){}},work:function(i){this.options=$.extend({type:"warn",content:"Hello, World.",lock:!1,timer:1500},i),this.create(),this.setContent(),this.show(),this.center();var t=this;if($(window).bind("resize",function(){t.center()}),this.options.lock)try{JDialog.lock.work()}catch(o){}var n=this;this.options.timer>0&&(this.handler=setTimeout(function(){n.remove(),n.options.callback&&n.options.callback()},this.options.timer))}},JDialog.win={work:function(i){return new __JWindow__(i)}};var __JWindow__=function(i){i=i||{};var t={title:"This is the title",content:"Hello, this is the content.",width:600,height:0,borderWidth:0,borderOpacity:.4,borderColor:"#000000",hasTitle:!0,lock:!0,skin:"default",position:"center",effect:0,maxEnable:!1,icon:"none",maxWidth:1920},o=$.extend(t,i),n={};return n.winBox=null,n.winBg=null,o.width<100&&(o.width=o.width*$(window).width()/100),o.height<100&&(o.height=o.height*$(window).height()/100),n.create=function(){n.winBox=$('<div class="jdialog_win_box jdialog_win_'+o.skin+'"></div>'),o.borderWidth>0?n.winBg=$('<div class="jdialog_win_box_bg"></div>'):n.winBox.addClass("box-shadow");var i=$('<div class="jdialog_win_title_box"></div>'),t=$('<div class="jdialog_win_title">'+o.title+"</div>"),e=$('<div class="jdialog_win_button"></div>'),a=$('<a class="jdialog_win_max_button" href="javascript:void(0)" title="最大化"></a>'),s=$('<a class="jdialog_win_close_button" href="javascript:void(0)" title="关闭"></a>');a.on("click",function(i){n.resizeToMax(),i.stopPropagation()}),s.on("click",function(){n.close()}),o.maxEnable&&e.append(a),e.append(s),i.append(t),i.append(e),n.winBox.append(i);var l=$('<div class="jdialog_win_CBOX"></div>'),d=$('<span class="jdialog_win_icon"></span>'),c=$('<div class="jdialog_win_content"></div>');c.append(o.content),"none"!=o.icon&&l.append(d),l.append(c),n.winBox.append(l);var h=$('<div class="jdialog_win_button_container"></div>'),p=$('<div class="jdialog_win_buttonInner"></div>');if(o.button){var w=function(i,t){var o=$('<a href="javascript:void(0);" class="btn btn-primary">'+i+"</a>");return o.click(function(){t()}),o};for(var r in o.button){var g=new w(r,o.button[r]);p.append(g)}h.append(p),n.winBox.append(h)}n.winBox.data("me",{title:t,content:l,max_btn:a}),i.mousedown(function(i){var t=i.pageX-n.winBox.position().left,e=i.pageY-n.winBox.position().top;$(document).mousemove(function(i){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),n.winBox.css({top:i.pageY-e+"px",left:i.pageX-t+"px"}),null!=n.winBg&&n.winBg.css({top:i.pageY-e-o.borderWidth+"px",left:i.pageX-t-o.borderWidth+"px"})})}).mouseup(function(){$(document).unbind("mousemove")}),null!=n.winBg&&$("body").append(n.winBg),$("body").append(n.winBox),n.setIcon(o.icon)},n.setIcon=function(i){"none"!=i&&n.winBox.find(".jdialog_win_icon").addClass("jdialog_win_icon_"+i)},n.setPosition=function(){var i,t,e=o.height>0?o.height:n.winBox.height();if(0==o.height&&void 0!=o.button&&(e+=60,o.height=e),"center"==o.position){var a=window.document.body.scrollTop||window.document.documentElement.scrollTop;t=(JDialog.getWindowHeight()-e)/2+a,i=(JDialog.getWindowWidth()-o.width)/2}else"number"==typeof o.position?(t=o.position,i=(JDialog.getWindowWidth()-o.width)/2):"[object Object]"===Object.prototype.toString.apply(o.position)&&(t=o.position.top,i=o.position.left);0>t&&(t=0),0>i&&(i=0),n.winBox.css({width:o.width+"px",height:e+"px",top:t+"px",left:i+"px"}),null!=n.winBg&&n.winBg.css({opacity:o.borderOpacity,"background-color":o.borderColor,width:o.width+2*o.borderWidth+"px",height:e+2*o.borderWidth+"px",top:t-o.borderWidth+"px",left:i-o.borderWidth+"px"}),"none"==o.icon?n.winBox.find(".jdialog_win_content").css({width:"100%"}):n.winBox.find(".jdialog_win_content").css({width:n.winBox.width()-20-n.winBox.find(".jdialog_win_icon").width()-15+"px"}),n.winBox.find(".jdialog_win_CBOX").height(e-120)},n.show=function(){if(null!=n.winBox){if(o.lock)try{JDialog.lock.work()}catch(i){}switch(o.effect){case 0:n.winBox.fadeIn(JDialog.transitionTime),null!=n.winBg&&n.winBg.fadeIn(JDialog.transitionTime);break;case 1:n.winBox.flyIn(JDialog.transitionTime),null!=n.winBg&&n.winBg.flyIn(JDialog.transitionTime);break;case 2:n.winBox.zoomIn(JDialog.transitionTime),null!=n.winBg&&n.winBg.zoomIn(JDialog.transitionTime)}}},n.clear=function(){null!=n.winBox&&(n.winBox.find(".jdialog_win_CBOX").empty(),n.setPosition())},n.resizeToMax=function(){var i=n.winBox.data("smax"),t=n.winBox.data("me").max_btn;void 0==i?(n.winBox.data("smax",{top:n.winBox.position().top,left:n.winBox.position().left,width:n.winBox.width()+2*parseInt(n.winBox.css("border-width")),height:n.winBox.height()+2*parseInt(n.winBox.css("border-width"))}),n.winBox.animate({top:0,left:0,width:$(window).width(),height:$(window).height(),opacity:1},"fast").css("z-index",9999),t.attr({"class":"jdialog_win_reduce_button",title:"还原"})):(n.winBox.animate({top:i.top,left:i.left,width:i.width,height:i.height,opacity:1},"fast"),n.winBox.removeData("smax"),t.attr({"class":"jdialog_win_max_button",title:"最大化"}))},n.lock=function(){var i=$('<div class="jwindow-lock"></div>'),t=n.winBox.find(".jdialog_win_title_box").height();i.css({top:t,left:0,width:n.winBox.width()+"px",height:n.winBox.height()-t+"px"}),n.winBox.append(i)},n.unlock=function(){n.winBox.find(".jwindow-lock").remove},n.close=function(){if(null!=n.winBox){switch(o.effect){case 0:n.winBox.fadeOut(JDialog.transitionTime),null!=n.winBg&&n.winBg.fadeOut(JDialog.transitionTime);break;case 1:n.winBox.flyOut(JDialog.transitionTime),null!=n.winBg&&n.winBg.flyOut(JDialog.transitionTime);break;case 2:n.winBox.zoomOut(JDialog.transitionTime),null!=n.winBg&&n.winBg.zoomOut(JDialog.transitionTime)}try{JDialog.lock.hide(),setTimeout(function(){n.winBox.remove(),n.winBg.remove()},JDialog.transitionTime)}catch(i){}}},$(window).bind("resize",function(){n.setPosition()}),n.create(),n.setPosition(),n.show(),n.options=o,n};